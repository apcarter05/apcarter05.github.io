<!doctype html>
<html lang="en-us">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Franklin Weather</title>
    <meta name="author" content="April Carter">
    <meta name="description" content="Assignment 7 franklin">
    <!-- external style references in the proper cascading order -->
    <link href="https://fonts.googleapis.com/css?family=Merriweather" rel="stylesheet">
    <!-- Google API font reference -->
    <link href="styles/normalize.css" rel="stylesheet">
    <!-- normalize useragent/browser defaults -->
    <link href="styles/main-8.css" rel="stylesheet">
    <!-- default styles - small/phone views -->
    <link href="styles/medium-8.css" rel="stylesheet">
    <!-- medium/tablet views -->
    <link href="styles/large-8.css" rel="stylesheet">
    <!-- large/wide/desktop views -->
</head>

<body>

    <header>
        <img src="images/sun.jpeg" alt="The site logo" width="100" height="100">
        <h1>Your Weather Forecast</h1>
        <div class="subheading">Your weather-Your way</div>
    </header>

    <!-- site navigation use placeholder references -->
    <nav>
        <button onclick="toggleNavMenu()">&#9776;</button>
        <ul id="primaryNav" class="hide">
            <li class="active"><a href="index.html">Home</a></li>
            <li><a href="franklin-7.html">Franklin</a></li>
            <li><a href="#">Greenville</a></li>
            <li><a href="#">Springfield</a></li>
            <li><a href="stormcenter.html">Storm Center</a></li>
            <li><a href="gallery-7.html">Gallery</a></li>
        </ul>
    </nav>
    
    <body>

    <header>

    </header>

    <section>

    </section>

    <script>
        var header = document.querySelector('header');
        var section = document.querySelector('section');
        
        var requestURL = 'https://byui-cit230.github.io/weather/data/towndata.json';
        var request = new XMLHttpRequest();
        request.open('GET', requestURL);
        request.responseType = 'json';
        request.send();
        request.onload = function() {
            var towns = request.response;
            populateHeader(towns);
            showTowns(towns);
        }
        
        function populateHeader(jsonObj) {
            var myH1 = document.createElement('h1');
            myH1.textContent = jsonObj['towns'];
            header.appendChild(myH1);

        }
        
        function showTowns(jsonObj) {
            var towns = jsonObj['towns'];

            for (var i = 0; i < towns.length; i++) {
                var myArticle = document.createElement('article');
                var myH2 = document.createElement('h2');
                var myPara1 = document.createElement('p');
                var myPara2 = document.createElement('p');
                var myPara3 = document.createElement('p');
                var myPara4 = document.createElement('p');
                var myList = document.createElement('ul');

                myH2.textContent = towns[i].name;
                myPara1.textContent = 'Town Motto: ' + towns[i].motto;
                myPara2.textContent = 'Year Founded: ' + towns[i].yearFounded;
                myPara3.textContent = 'Current Population: ' + towns[i].currentPopulation;
                myPara4.textContent = 'Average Rainfall: ' + towns[i].averageRainfall;

                var upcomingEvents = towns[i].events;
                for (var j = 0; j < upcomingEvents.length; j++) {
                    var listItem = document.createElement('li');
                    listItem.textContent = upcomingEvents[j];
                    myList.appendChild(listItem);
                }

                myArticle.appendChild(myH2);
                myArticle.appendChild(myPara1);
                myArticle.appendChild(myPara2);
                myArticle.appendChild(myPara3);
                myArticle.appendChild(myPara4);
                myArticle.appendChild(myList);

                section.appendChild(myArticle);
            }
        }
        
        </script>
    </body>
    
    <footer>
        <aside>
            Contact information placeholder
        </aside>
        <p class="footer-bar">&copy;2018 All Rights Reserved | Your Weather Forecast | <span id="dayofWeek"></span>
        </p>
    </footer>

    <script src="scripts/currentdate.js"></script>
    <script src="scripts/hamburger.js"></script>

</body>

</html>
